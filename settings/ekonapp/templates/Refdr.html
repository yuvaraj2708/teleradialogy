{% extends 'base.html' %}

{% block content %}
  <main>
    <form method="post">
      {% csrf_token %}

    <div class="mb-4">
      <h5 class="page-heading">Pathalogist Master</h5>
    </div>
    <div class="auto-scroll">
      <div class="bg-white rounded-2 p-3">
        <div class="row">
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Doctor Code </label>
              <input type="text" name= "DoctorCode" value= "{{DoctorCode}}" class="form-control"readonly>
            </div>
          </div>
         
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Doctor Name *</label>
              <input type="text" class="form-control" name="DoctorName" value="{% if not form.instance.id %}Dr {% endif %}{{ form.instance.DoctorName }}" required >
            </div>
          </div>
          
        
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Qualification *</label>
              <input type="text" name="Qualification" class="form-control" required>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Specialisation *</label>
              <input type="text"  name= "Specialisation" class="form-control" required>
              
             
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Address</label>
              <textarea type="text" name="Address" class="form-control" required></textarea>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">PIN Code </label>
              <input type="text" name="PINCode" class="form-control" required>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Mobile *</label>
              <input type="text" name="Mobile" id="contact_number" class="form-control" required>
            </div>
          </div>
          <div class="col-md-3">
            <div class="form-group">
              <label class="form-label">Email ID </label>
              <input type="email" name="EmailID" class="form-control" >
            </div>
          </div>
        </div>
        <div class="form-group d-flex gap-3 justify-content-center">
          <button type="submit" class="theme-btn">Save</button>
          
          <button type="button" class="theme-btn" onclick="history.back()">Back</button>
      </div>
      </div>
    </div>
  </form>
  </main>
</body>

</html>
{% endblock %}

<script>
    // Get the textarea element
    const doctorNameInput = document.getElementById('doctorName');
  
    // Add an event listener for when the input value changes
    doctorNameInput.addEventListener('input', () => {
      // Get the current value of the input
      const currentValue = doctorNameInput.value;
  
      // Check if the value starts with "Dr" (case-insensitive)
      if (currentValue.toLowerCase().startsWith('dr')) {
        // If it does, don't do anything
        return;
      }
  
      // Otherwise, update the input value to start with "Dr"
      doctorNameInput.value = `Dr ${currentValue}`;
    });

    document.querySelector('#contact_number').addEventListener('input', function(event) {
      // Remove any non-numeric characters from the input field
      var phoneNumber = this.value.replace(/\D/g, '');
      
      // Check if the length of the phone number is exactly 10 digits
      if (phoneNumber.length !== 10) {
          // If the phone number is not exactly 10 digits, show an error message
          this.setCustomValidity('Please enter a 10-digit phone number.');
      } else {
          // Otherwise, clear the error message
          this.setCustomValidity('');
      }
  });
  </script>
  